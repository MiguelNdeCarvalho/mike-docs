{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to Mike-Docs Who am I? First of all, I am MiguelNdeCarvalho a Portuguese tech enthusiast that really enjoys to mess with servers stuff. What will you find here? Here you will find all the documentation of all the projects that I have been developing on my github profile. How can you contact me ? Check it here . How can I donate? Check it here .","title":"Home"},{"location":"#welcome-to-mike-docs","text":"","title":"Welcome to Mike-Docs"},{"location":"#who-am-i","text":"First of all, I am MiguelNdeCarvalho a Portuguese tech enthusiast that really enjoys to mess with servers stuff.","title":"Who am I?"},{"location":"#what-will-you-find-here","text":"Here you will find all the documentation of all the projects that I have been developing on my github profile.","title":"What will you find here?"},{"location":"#how-can-you-contact-me","text":"Check it here .","title":"How can you contact me ?"},{"location":"#how-can-i-donate","text":"Check it here .","title":"How can I donate?"},{"location":"contact/","text":"Contact You can contact me via: Telegram Discord","title":"Contact"},{"location":"contact/#contact","text":"You can contact me via: Telegram Discord","title":"Contact"},{"location":"donate/","text":"Donate All the projects that I have been doing are free and open-source ! If you like what I do and wanna support me, you can simply star the projects , or contributing to them solving issues . You can even support me via: Paypal Github Sponsor","title":"Donate"},{"location":"donate/#donate","text":"All the projects that I have been doing are free and open-source ! If you like what I do and wanna support me, you can simply star the projects , or contributing to them solving issues . You can even support me via: Paypal Github Sponsor","title":"Donate"},{"location":"containers/arch/","text":"Repo","title":"arch-repo"},{"location":"containers/arch/#repo","text":"","title":"Repo"},{"location":"projects/speedtest-exporter/","text":"Speedtest Exporter Speedtest exporter is a Prometheus exporter written in Python using the official Speedtest CLI made by Ookla . It will measure your: Download Speed Upload Speed Ping Jitter Setting up the Exporter Docker Image location: Container Registry Image Github Container ghcr.io/miguelndecarvalho/speedtest-exporter Dockr Hub miguelndecarvalho/speedtest-exporter Warning I recommend you to use Github Container as you won't face any pull limit . Deploying: Docker CLI docker run -d \\ --name = speedtest-exporter \\ -p 9798 :9798 \\ -e SPEEDTEST_PORT = <speedtest-port> #optional \\ -e SPEEDTEST_SERVER = <speedtest-serverid> #optional \\ --restart unless-stopped \\ miguelndecarvalho/speedtest-exporter Docker-Compose version : \"3.0\" services : speedtest-exporter : image : miguelndecarvalho/speedtest-exporter container_name : speedtest-exporter environment : - SPEEDTEST_PORT=<speedtest-port> #optional - SPEEDTEST_SERVER=<server-id> #optional ports : - 9798:9798 restart : unless-stopped Tip You can pull a specific version of the exporter. For example: miguelndecarvalho/speedtest-exporter:v3.1 Get the changelog here Environments Env Optional Description Default Example SPEEDTEST_PORT Sets the Port where exporter listens 9798 9800 SPEEDTEST_SERVER Set the Server from where the tests will be made Best Server 31309 - MEO PT Tip To get the ServerID to use in the Env SPEEDTEST_SERVER you can use this Server list to get the IDs . Warning When you set the Env SPEEDTEST_PORT , don't forget to publish the right port . Docker CLI -p <SPEEDTEST_PORT>:<SPEEDTEST_PORT> Docker-Compose ports : - <SPEEDTEST_PORT>:<SPEEDTEST_PORT> Danger We strongly discourage you from setting a specific server. If the server that you are using to make the tests stops working, your exporter won't be able to do the tests and you won't get the metrics . Manual Requirements You will need to have: git , python3 , pip3 , speedtest Steps to install Clone repo - git clone https://github.com/MiguelNdeCarvalho/speedtest-exporter.git Enter the repo folder - cd speedtest-exporter Install python modules - pip install -r src/requirements.txt Execute the exporter - python src/exporter.py Then just access the page http://localhost:9800/ and you will have the exporter page. Tip If you wanna set the Port and the default Server just use these Envs to set it Example: export SPEEDTEST_PORT = 9800 ; export SPEEDTEST_SERVER = 1758 ; python src/exporter.py Add exporter to Prometheus To add the Speedtest Exporter to your Prometheus just add this to your prometheus.yml : - job_name : 'speedtest-exporter' scrape_interval : <time-between-tests> scrape_timeout : 1m static_configs : - targets : [ '<ip-of-exporter-machine>:<port-where-exporter-is-listenning>' ] Real example where the tests will be done every hour : - job_name : 'speedtest-exporter' scrape_interval : 1h scrape_timeout : 1m static_configs : - targets : [ 'speedtest-exporter:9798' ] Grafana Dashboard The Grafana Dashboard can be found here or you can get the file here Fig 1. Grafana Dashboard FAQ Question How can I set the time between the Scrapes? That is configured on your prometheus.yml . In this example the test will be made every hour scrape_interval: 1h . Question Why isn't it working? If you set the tests to be made every hour ( scrape_interval: 1h ), Prometheus will only do the first scrape after it is up for an hour. Question How can I test the exporter without Prometheus? You can just acess access it with your browser http://ip:9798/ and you should be prompted with a welcome screen. If you access http://ip:9798/metrics it should take around 30 seconds and then you will be prompted with all the metrics. Changelog You can check the changelog here","title":"Speedtest Exporter"},{"location":"projects/speedtest-exporter/#speedtest-exporter","text":"Speedtest exporter is a Prometheus exporter written in Python using the official Speedtest CLI made by Ookla . It will measure your: Download Speed Upload Speed Ping Jitter","title":"Speedtest Exporter"},{"location":"projects/speedtest-exporter/#setting-up-the-exporter","text":"","title":"Setting up the Exporter"},{"location":"projects/speedtest-exporter/#docker","text":"Image location: Container Registry Image Github Container ghcr.io/miguelndecarvalho/speedtest-exporter Dockr Hub miguelndecarvalho/speedtest-exporter Warning I recommend you to use Github Container as you won't face any pull limit . Deploying: Docker CLI docker run -d \\ --name = speedtest-exporter \\ -p 9798 :9798 \\ -e SPEEDTEST_PORT = <speedtest-port> #optional \\ -e SPEEDTEST_SERVER = <speedtest-serverid> #optional \\ --restart unless-stopped \\ miguelndecarvalho/speedtest-exporter Docker-Compose version : \"3.0\" services : speedtest-exporter : image : miguelndecarvalho/speedtest-exporter container_name : speedtest-exporter environment : - SPEEDTEST_PORT=<speedtest-port> #optional - SPEEDTEST_SERVER=<server-id> #optional ports : - 9798:9798 restart : unless-stopped Tip You can pull a specific version of the exporter. For example: miguelndecarvalho/speedtest-exporter:v3.1 Get the changelog here","title":"Docker"},{"location":"projects/speedtest-exporter/#environments","text":"Env Optional Description Default Example SPEEDTEST_PORT Sets the Port where exporter listens 9798 9800 SPEEDTEST_SERVER Set the Server from where the tests will be made Best Server 31309 - MEO PT Tip To get the ServerID to use in the Env SPEEDTEST_SERVER you can use this Server list to get the IDs . Warning When you set the Env SPEEDTEST_PORT , don't forget to publish the right port . Docker CLI -p <SPEEDTEST_PORT>:<SPEEDTEST_PORT> Docker-Compose ports : - <SPEEDTEST_PORT>:<SPEEDTEST_PORT> Danger We strongly discourage you from setting a specific server. If the server that you are using to make the tests stops working, your exporter won't be able to do the tests and you won't get the metrics .","title":"Environments"},{"location":"projects/speedtest-exporter/#manual","text":"","title":"Manual"},{"location":"projects/speedtest-exporter/#requirements","text":"You will need to have: git , python3 , pip3 , speedtest","title":"Requirements"},{"location":"projects/speedtest-exporter/#steps-to-install","text":"Clone repo - git clone https://github.com/MiguelNdeCarvalho/speedtest-exporter.git Enter the repo folder - cd speedtest-exporter Install python modules - pip install -r src/requirements.txt Execute the exporter - python src/exporter.py Then just access the page http://localhost:9800/ and you will have the exporter page. Tip If you wanna set the Port and the default Server just use these Envs to set it Example: export SPEEDTEST_PORT = 9800 ; export SPEEDTEST_SERVER = 1758 ; python src/exporter.py","title":"Steps to install"},{"location":"projects/speedtest-exporter/#add-exporter-to-prometheus","text":"To add the Speedtest Exporter to your Prometheus just add this to your prometheus.yml : - job_name : 'speedtest-exporter' scrape_interval : <time-between-tests> scrape_timeout : 1m static_configs : - targets : [ '<ip-of-exporter-machine>:<port-where-exporter-is-listenning>' ] Real example where the tests will be done every hour : - job_name : 'speedtest-exporter' scrape_interval : 1h scrape_timeout : 1m static_configs : - targets : [ 'speedtest-exporter:9798' ]","title":"Add exporter to Prometheus"},{"location":"projects/speedtest-exporter/#grafana-dashboard","text":"The Grafana Dashboard can be found here or you can get the file here Fig 1. Grafana Dashboard","title":"Grafana Dashboard"},{"location":"projects/speedtest-exporter/#faq","text":"Question How can I set the time between the Scrapes? That is configured on your prometheus.yml . In this example the test will be made every hour scrape_interval: 1h . Question Why isn't it working? If you set the tests to be made every hour ( scrape_interval: 1h ), Prometheus will only do the first scrape after it is up for an hour. Question How can I test the exporter without Prometheus? You can just acess access it with your browser http://ip:9798/ and you should be prompted with a welcome screen. If you access http://ip:9798/metrics it should take around 30 seconds and then you will be prompted with all the metrics.","title":"FAQ"},{"location":"projects/speedtest-exporter/#changelog","text":"You can check the changelog here","title":"Changelog"}]}